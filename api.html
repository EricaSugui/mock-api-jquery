<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!--   See Using Zendesk Garden:
    https://developer.zendesk.com/apps/docs/developer-guide/setup#using-zendesk-garden
    https://garden.zendesk.com/css-components/bedrock/
    https://garden.zendesk.com/css-components/utilities/typography/
   -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/@zendeskgarden/css-bedrock@7.0.21,npm/@zendeskgarden/css-utilities@4.3.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
<!-- Adicionando JQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
crossorigin="anonymous"></script>

<!-- Adicionando Javascript -->
<script type="text/javascript" >

$(document).ready(function() {

    // function limpa_formulário_cep() {
    //     $("#cnpj").val("");
    // }
            var cnpj = $("#cnpj")
        //   if (cnpj !== "") {
        //     $.getJSON("https://5ef1659b1faf160016b4d545.mockapi.io/api/v1/users/"+cnpj+"/", function(dados) {
        //          //e.preventDefault();
        //          window.open(dados.avatar);
        //         console.log(cnpj);
        //         // if (dados.name == "Mabel Funk") {
        //         //     window.open(dados.avatar);
        //         // }
        //         // else if (dados.name != "Mabel Funk") {
        //         //     alert("Usuário não encontrado");
        //         // }   
        //     });
            let verFatura = $("#verFatura");
            //verFatura.bind("click",function() {
                function Fatura(event) {
                console.log(cnpj.val());
                cnpjInput = cnpj.val();
                verFatura.bind( "click", [
                    $.getJSON("https://5ef1659b1faf160016b4d545.mockapi.io/api/v1/users/"+cnpjInput, function(dados) {
                     window.open(dados.avatar);
                     })
                    ])
                // $.getJSON("https://5ef1659b1faf160016b4d545.mockapi.io/api/v1/users/"+cnpjInput, function(dados) {
                //     window.open(dados.avatar);
                // })
            }
            function handler( event ) {
                alert( event.data.foo );
                //Fatura(event);
            }
            verFatura.bind( "click", {
                //foo: "Veja sua fatura"
                Fatura(event);
            }, handler );

        //} //end if.

        // if (request_url) {
        //     //limpa_formulário_cep();
        //     e.preventDefault();
        //     //window.open(dados.avatar);
        //     alert("Formato de CNPJ inválido.");
        
        //}

    }); //end if.
    // else {
    //     limpa_formulário_cep();
    // }
 //});
// });

</script>
</head>
<body>

  <form method="get">
    <div class="form-group">
    <label>CNPJ:</label>
    <input name="cnpj" type="text" id="cnpj" value="" class="form-control" /></div>
    <!-- <div class="form-group">
    <label>Situação:</label>
    <input name="situacao" type="text" id="situacao" class="form-control" /></div>
    <div class="form-group">
    <label>Razão Social:</label>
      <input name="nome" type="text" id="nome" class="form-control" /></div>
    <div class="form-group">
    <label>Data de Abertura:</label>
    <input name="abertura" type="text" id="abertura" class="form-control" /></div> -->
    <input type="submit" name="submit" id="verFatura" value="Submit" />
    <!-- <input type="button" value="msg"> -->
  </form>
  
  <!-- <script src="https://static.zdassets.com/zendesk_app_framework_sdk/2.0/zaf_sdk.min.js"></script>
  <script>
    // Initialise Apps framework client. See also:
    // https://developer.zendesk.com/apps/docs/developer-guide/getting_started
    var client = ZAFClient.init();
    client.invoke('resize', { width: '100%', height: '200px' });
  </script> -->
</body>
</html>
